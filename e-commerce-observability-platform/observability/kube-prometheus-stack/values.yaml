# values-minikube.yaml

# =====================
# Global Settings
# =====================
defaultRules:
  create: true
  rules:
    etcd: false          # Disable etcd rules in minikube
    kubernetesSystem: true

# =====================
# Alertmanager
# =====================
alertmanager:
  enabled: true
  service:
    type: NodePort
    nodePort: 30400
  alertmanagerSpec:
    replicas: 1
    retention: 12h
    storage:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 100Mi
          storageClassName: "standard"
    resources:
      limits:
        cpu: 200m
        memory: 256Mi
      requests:
        cpu: 100m
        memory: 128Mi

# =====================
# Prometheus
# =====================
prometheus:
  service:
    type: NodePort
    nodePort: 30090
  prometheusSpec:
    replicas: 1
    retention: 12h
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchExpressions:
            - key: kubernetes.io/hostname
              operator: In
              values:
              - minikube
    storageSpec:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 200Mi
          storageClassName: "standard"
    resources:
      limits:
        cpu: 500m
        memory: 1Gi
      requests:
        cpu: 200m
        memory: 512Mi
    # Minikube-appropriate scrape settings
    scrapeInterval: 30s
    evaluationInterval: 30s
    # Add service discovery for your loadgenerator (example)
    additionalScrapeConfigs:
      - job_name: 'loadgenerator'
        kubernetes_sd_configs:
          - role: pod
        relabel_configs:
          - source_labels: [__meta_kubernetes_pod_label_app]
            regex: loadgenerator
            action: keep

# =====================
# Grafana
# =====================
grafana:
  enabled: true
  adminUser: admin
  adminPassword: admin
  service:
    type: NodePort
    nodePort: 30300
  defaultDashboardsEnabled: true
  persistence:
    enabled: false
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  sidecar:
    dashboards:
      enabled: true
      searchNamespace: ALL
    datasources:
      enabled: true

# =====================
# Exporters
# =====================
nodeExporter:
  enabled: true
  resources:
    limits:
      cpu: 200m
      memory: 50Mi
    requests:
      cpu: 100m
      memory: 30Mi

kubeStateMetrics:
  enabled: true
  resources:
    limits:
      cpu: 100m
      memory: 64Mi
    requests:
      cpu: 50m
      memory: 32Mi

# =====================
# Operator
# =====================
prometheusOperator:
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

              